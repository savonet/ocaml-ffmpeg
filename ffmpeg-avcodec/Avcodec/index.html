<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Avcodec (ffmpeg-avcodec.Avcodec)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.1.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../index.html">ffmpeg-avcodec</a> &#x00BB; Avcodec</nav><header class="odoc-preamble"><h1>Module <code><span>Avcodec</span></code></h1><p>This module contains decoders and encoders for audio, video and subtitle codecs.</p></header><nav class="odoc-toc"><ul><li><a href="#constants">Constants</a></li></ul></nav><div class="odoc-content"><div class="odoc-spec"><div class="spec type" id="type-codec" class="anchored"><a href="#type-codec" class="anchor"></a><code><span><span class="keyword">type</span> <span>('media, 'mode) codec</span></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-params" class="anchored"><a href="#type-params" class="anchor"></a><code><span><span class="keyword">type</span> <span>'media params</span></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-decoder" class="anchored"><a href="#type-decoder" class="anchor"></a><code><span><span class="keyword">type</span> <span>'media decoder</span></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-encoder" class="anchored"><a href="#type-encoder" class="anchor"></a><code><span><span class="keyword">type</span> <span>'media encoder</span></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-encode" class="anchored"><a href="#type-encode" class="anchor"></a><code><span><span class="keyword">type</span> encode</span><span> = </span><span>[ </span></code><table><tr id="type-encode.Encoder" class="anchored"><td class="def constructor"><a href="#type-encode.Encoder" class="anchor"></a><code><span>| </span></code><code><span>`Encoder</span></code></td></tr></table><code><span> ]</span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-decode" class="anchored"><a href="#type-decode" class="anchor"></a><code><span><span class="keyword">type</span> decode</span><span> = </span><span>[ </span></code><table><tr id="type-decode.Decoder" class="anchored"><td class="def constructor"><a href="#type-decode.Decoder" class="anchor"></a><code><span>| </span></code><code><span>`Decoder</span></code></td></tr></table><code><span> ]</span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-profile" class="anchored"><a href="#type-profile" class="anchor"></a><code><span><span class="keyword">type</span> profile</span><span> = </span><span>{</span></code><table><tr id="type-profile.id" class="anchored"><td class="def record field"><a href="#type-profile.id" class="anchor"></a><code><span>id : int;</span></code></td></tr><tr id="type-profile.profile_name" class="anchored"><td class="def record field"><a href="#type-profile.profile_name" class="anchor"></a><code><span>profile_name : string;</span></code></td></tr></table><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-descriptor" class="anchored"><a href="#type-descriptor" class="anchor"></a><code><span><span class="keyword">type</span> descriptor</span><span> = </span><span>{</span></code><table><tr id="type-descriptor.media_type" class="anchored"><td class="def record field"><a href="#type-descriptor.media_type" class="anchor"></a><code><span>media_type : <a href="../../ffmpeg-avutil/Avutil/index.html#type-media_type">Avutil.media_type</a>;</span></code></td></tr><tr id="type-descriptor.name" class="anchored"><td class="def record field"><a href="#type-descriptor.name" class="anchor"></a><code><span>name : string;</span></code></td></tr><tr id="type-descriptor.long_name" class="anchored"><td class="def record field"><a href="#type-descriptor.long_name" class="anchor"></a><code><span>long_name : <span>string option</span>;</span></code></td></tr><tr id="type-descriptor.properties" class="anchored"><td class="def record field"><a href="#type-descriptor.properties" class="anchor"></a><code><span>properties : <span><span>[ `Intra_only
             <span>| `Lossy</span>
             <span>| `Lossless</span>
             <span>| `Reorder</span>
             <span>| `Bitmap_sub</span>
             <span>| `Text_sub</span> ]</span>
               list</span>;</span></code></td></tr><tr id="type-descriptor.mime_types" class="anchored"><td class="def record field"><a href="#type-descriptor.mime_types" class="anchor"></a><code><span>mime_types : <span>string list</span>;</span></code></td></tr><tr id="type-descriptor.profiles" class="anchored"><td class="def record field"><a href="#type-descriptor.profiles" class="anchor"></a><code><span>profiles : <span><a href="#type-profile">profile</a> list</span>;</span></code></td></tr></table><code><span>}</span></code></div></div><h6 id="constants"><a href="#constants" class="anchor"></a>Constants</h6><div class="odoc-spec"><div class="spec value" id="val-flag_qscale" class="anchored"><a href="#val-flag_qscale" class="anchor"></a><code><span><span class="keyword">val</span> flag_qscale : int</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-params" class="anchored"><a href="#val-params" class="anchor"></a><code><span><span class="keyword">val</span> params : <span><span><span class="type-var">'media</span> <a href="#type-encoder">encoder</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'media</span> <a href="#type-params">params</a></span></span></code></div><div class="spec-doc"><p>Get the params of a given encoder</p></div></div><div class="odoc-spec"><div class="spec value" id="val-descriptor" class="anchored"><a href="#val-descriptor" class="anchor"></a><code><span><span class="keyword">val</span> descriptor : <span><span><span class="type-var">'media</span> <a href="#type-params">params</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-descriptor">descriptor</a> option</span></span></code></div><div class="spec-doc"><p>Get the params descriptor.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-time_base" class="anchored"><a href="#val-time_base" class="anchor"></a><code><span><span class="keyword">val</span> time_base : <span><span><span class="type-var">'media</span> <a href="#type-encoder">encoder</a></span> <span class="arrow">&#45;&gt;</span></span> <a href="../../ffmpeg-avutil/Avutil/index.html#type-rational">Avutil.rational</a></span></code></div><div class="spec-doc"><p>Get the time base of a given encoder.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-name" class="anchored"><a href="#val-name" class="anchor"></a><code><span><span class="keyword">val</span> name : <span><span><span>( <span class="type-var">_</span>, <span class="type-var">_</span> )</span> <a href="#type-codec">codec</a></span> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Get the name of a given codec.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-capability" class="anchored"><a href="#type-capability" class="anchor"></a><code><span><span class="keyword">type</span> capability</span><span> = </span><span>[ </span></code><table><tr id="type-capability.Draw_horiz_band" class="anchored"><td class="def constructor"><a href="#type-capability.Draw_horiz_band" class="anchor"></a><code><span>| </span></code><code><span>`Draw_horiz_band</span></code></td></tr><tr id="type-capability.Dr1" class="anchored"><td class="def constructor"><a href="#type-capability.Dr1" class="anchor"></a><code><span>| </span></code><code><span>`Dr1</span></code></td></tr><tr id="type-capability.Truncated" class="anchored"><td class="def constructor"><a href="#type-capability.Truncated" class="anchor"></a><code><span>| </span></code><code><span>`Truncated</span></code></td></tr><tr id="type-capability.Delay" class="anchored"><td class="def constructor"><a href="#type-capability.Delay" class="anchor"></a><code><span>| </span></code><code><span>`Delay</span></code></td></tr><tr id="type-capability.Small_last_frame" class="anchored"><td class="def constructor"><a href="#type-capability.Small_last_frame" class="anchor"></a><code><span>| </span></code><code><span>`Small_last_frame</span></code></td></tr><tr id="type-capability.Subframes" class="anchored"><td class="def constructor"><a href="#type-capability.Subframes" class="anchor"></a><code><span>| </span></code><code><span>`Subframes</span></code></td></tr><tr id="type-capability.Experimental" class="anchored"><td class="def constructor"><a href="#type-capability.Experimental" class="anchor"></a><code><span>| </span></code><code><span>`Experimental</span></code></td></tr><tr id="type-capability.Channel_conf" class="anchored"><td class="def constructor"><a href="#type-capability.Channel_conf" class="anchor"></a><code><span>| </span></code><code><span>`Channel_conf</span></code></td></tr><tr id="type-capability.Frame_threads" class="anchored"><td class="def constructor"><a href="#type-capability.Frame_threads" class="anchor"></a><code><span>| </span></code><code><span>`Frame_threads</span></code></td></tr><tr id="type-capability.Slice_threads" class="anchored"><td class="def constructor"><a href="#type-capability.Slice_threads" class="anchor"></a><code><span>| </span></code><code><span>`Slice_threads</span></code></td></tr><tr id="type-capability.Param_change" class="anchored"><td class="def constructor"><a href="#type-capability.Param_change" class="anchor"></a><code><span>| </span></code><code><span>`Param_change</span></code></td></tr><tr id="type-capability.Auto_threads" class="anchored"><td class="def constructor"><a href="#type-capability.Auto_threads" class="anchor"></a><code><span>| </span></code><code><span>`Auto_threads</span></code></td></tr><tr id="type-capability.Variable_frame_size" class="anchored"><td class="def constructor"><a href="#type-capability.Variable_frame_size" class="anchor"></a><code><span>| </span></code><code><span>`Variable_frame_size</span></code></td></tr><tr id="type-capability.Avoid_probing" class="anchored"><td class="def constructor"><a href="#type-capability.Avoid_probing" class="anchor"></a><code><span>| </span></code><code><span>`Avoid_probing</span></code></td></tr><tr id="type-capability.Intra_only" class="anchored"><td class="def constructor"><a href="#type-capability.Intra_only" class="anchor"></a><code><span>| </span></code><code><span>`Intra_only</span></code></td></tr><tr id="type-capability.Lossless" class="anchored"><td class="def constructor"><a href="#type-capability.Lossless" class="anchor"></a><code><span>| </span></code><code><span>`Lossless</span></code></td></tr><tr id="type-capability.Hardware" class="anchored"><td class="def constructor"><a href="#type-capability.Hardware" class="anchor"></a><code><span>| </span></code><code><span>`Hardware</span></code></td></tr><tr id="type-capability.Hybrid" class="anchored"><td class="def constructor"><a href="#type-capability.Hybrid" class="anchor"></a><code><span>| </span></code><code><span>`Hybrid</span></code></td></tr><tr id="type-capability.Encoder_reordered_opaque" class="anchored"><td class="def constructor"><a href="#type-capability.Encoder_reordered_opaque" class="anchor"></a><code><span>| </span></code><code><span>`Encoder_reordered_opaque</span></code></td></tr></table><code><span> ]</span></code></div><div class="spec-doc"><p>Codec capabilities.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-capabilities" class="anchored"><a href="#val-capabilities" class="anchor"></a><code><span><span class="keyword">val</span> capabilities : <span><span><span>( <span>[&lt; `Audio <span>| `Video</span> ]</span>, <a href="#type-encode">encode</a> )</span> <a href="#type-codec">codec</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-capability">capability</a> list</span></span></code></div><div class="spec-doc"><p>Get the encoding capabilities for this codec.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-hw_config_method" class="anchored"><a href="#type-hw_config_method" class="anchor"></a><code><span><span class="keyword">type</span> hw_config_method</span><span> = </span><span>[ </span></code><table><tr id="type-hw_config_method.Hw_device_ctx" class="anchored"><td class="def constructor"><a href="#type-hw_config_method.Hw_device_ctx" class="anchor"></a><code><span>| </span></code><code><span>`Hw_device_ctx</span></code></td></tr><tr id="type-hw_config_method.Hw_frames_ctx" class="anchored"><td class="def constructor"><a href="#type-hw_config_method.Hw_frames_ctx" class="anchor"></a><code><span>| </span></code><code><span>`Hw_frames_ctx</span></code></td></tr><tr id="type-hw_config_method.Internal" class="anchored"><td class="def constructor"><a href="#type-hw_config_method.Internal" class="anchor"></a><code><span>| </span></code><code><span>`Internal</span></code></td></tr><tr id="type-hw_config_method.Ad_hoc" class="anchored"><td class="def constructor"><a href="#type-hw_config_method.Ad_hoc" class="anchor"></a><code><span>| </span></code><code><span>`Ad_hoc</span></code></td></tr></table><code><span> ]</span></code></div><div class="spec-doc"><p>Codec hardware config method.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-hw_config" class="anchored"><a href="#type-hw_config" class="anchor"></a><code><span><span class="keyword">type</span> hw_config</span><span> = </span><span>{</span></code><table><tr id="type-hw_config.pixel_format" class="anchored"><td class="def record field"><a href="#type-hw_config.pixel_format" class="anchor"></a><code><span>pixel_format : <a href="../../ffmpeg-avutil/Avutil/Pixel_format/index.html#type-t">Avutil.Pixel_format.t</a>;</span></code></td></tr><tr id="type-hw_config.methods" class="anchored"><td class="def record field"><a href="#type-hw_config.methods" class="anchor"></a><code><span>methods : <span><a href="#type-hw_config_method">hw_config_method</a> list</span>;</span></code></td></tr><tr id="type-hw_config.device_type" class="anchored"><td class="def record field"><a href="#type-hw_config.device_type" class="anchor"></a><code><span>device_type : <a href="../../ffmpeg-avutil/Avutil/HwContext/index.html#type-device_type">Avutil.HwContext.device_type</a>;</span></code></td></tr></table><code><span>}</span></code></div><div class="spec-doc"><p>Hardward config for the given codec.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-hw_configs" class="anchored"><a href="#val-hw_configs" class="anchor"></a><code><span><span class="keyword">val</span> hw_configs : <span><span><span>( <span>[&lt; `Audio <span>| `Video</span> ]</span>, <span class="type-var">_</span> )</span> <a href="#type-codec">codec</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-hw_config">hw_config</a> list</span></span></code></div><div class="spec-doc"><p>Get the codec's hardward configs.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-Packet" class="anchored"><a href="#module-Packet" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Packet/index.html">Packet</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Packet.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-Audio" class="anchored"><a href="#module-Audio" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Audio/index.html">Audio</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Audio codecs.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-Video" class="anchored"><a href="#module-Video" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Video/index.html">Video</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Video codecs.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-Subtitle" class="anchored"><a href="#module-Subtitle" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Subtitle/index.html">Subtitle</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Subtitle codecs.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-BitstreamFilter" class="anchored"><a href="#module-BitstreamFilter" class="anchor"></a><code><span><span class="keyword">module</span> <a href="BitstreamFilter/index.html">BitstreamFilter</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-decode" class="anchored"><a href="#val-decode" class="anchor"></a><code><span><span class="keyword">val</span> decode : 
  <span><span><span class="type-var">'media</span> <a href="#type-decoder">decoder</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span><span><span class="type-var">'media</span> <a href="../../ffmpeg-avutil/Avutil/index.html#type-frame">Avutil.frame</a></span> <span class="arrow">&#45;&gt;</span></span> unit )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'media</span> <a href="Packet/index.html#type-t">Packet.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div><div class="spec-doc"><p><code>Avcodec.decode decoder f packet</code> applies function <code>f</code> to the decoded frames frome the <code>packet</code> according to the <code>decoder</code> configuration.</p><p>Raise Error if the decoding failed.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-flush_decoder" class="anchored"><a href="#val-flush_decoder" class="anchor"></a><code><span><span class="keyword">val</span> flush_decoder : <span><span><span class="type-var">'media</span> <a href="#type-decoder">decoder</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>( <span><span><span class="type-var">'media</span> <a href="../../ffmpeg-avutil/Avutil/index.html#type-frame">Avutil.frame</a></span> <span class="arrow">&#45;&gt;</span></span> unit )</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>Avcodec.flush_decoder decoder f</code> applies function <code>f</code> to the decoded frames frome the buffered packets in the <code>decoder</code>.</p><p>Raise Error if the decoding failed.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-encode" class="anchored"><a href="#val-encode" class="anchor"></a><code><span><span class="keyword">val</span> encode : 
  <span><span><span class="type-var">'media</span> <a href="#type-encoder">encoder</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span><span><span class="type-var">'media</span> <a href="Packet/index.html#type-t">Packet.t</a></span> <span class="arrow">&#45;&gt;</span></span> unit )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'media</span> <a href="../../ffmpeg-avutil/Avutil/index.html#type-frame">Avutil.frame</a></span> <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div><div class="spec-doc"><p><code>Avcodec.encode encoder f frame</code> applies function <code>f</code> to the encoded packets from the <code>frame</code> according to the <code>encoder</code> configuration.</p><p>Raise Error if the encoding failed.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-flush_encoder" class="anchored"><a href="#val-flush_encoder" class="anchor"></a><code><span><span class="keyword">val</span> flush_encoder : <span><span><span class="type-var">'media</span> <a href="#type-encoder">encoder</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>( <span><span><span class="type-var">'media</span> <a href="Packet/index.html#type-t">Packet.t</a></span> <span class="arrow">&#45;&gt;</span></span> unit )</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>Avcodec.flush_encoder encoder</code> applies function <code>f</code> to the encoded packets from the buffered frames in the <code>encoder</code>.</p><p>Raise Error if the encoding failed.</p></div></div></div></body></html>